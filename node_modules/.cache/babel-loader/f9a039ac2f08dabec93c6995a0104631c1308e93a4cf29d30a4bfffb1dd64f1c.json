{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _extends2 = require('babel-runtime/helpers/extends');\nvar _extends3 = _interopRequireDefault(_extends2);\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\nvar _createClass2 = require('babel-runtime/helpers/createClass');\nvar _createClass3 = _interopRequireDefault(_createClass2);\nvar _inherits2 = require('babel-runtime/helpers/inherits');\nvar _inherits3 = _interopRequireDefault(_inherits2);\nvar _react = require('react');\nvar React = _interopRequireWildcard(_react);\nvar _libs = require('../../libs');\nvar _locale = require('../locale');\nvar _locale2 = _interopRequireDefault(_locale);\nvar _TableLayout = require('./TableLayout');\nvar _TableLayout2 = _interopRequireDefault(_TableLayout);\nvar _normalizeColumns = require('./normalizeColumns');\nvar _normalizeColumns2 = _interopRequireDefault(_normalizeColumns);\nvar _utils = require('./utils');\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\nvar tableIDSeed = 1;\nfunction filterData(data, columns) {\n  return columns.reduce(function (preData, column) {\n    var filterable = column.filterable,\n      filterMultiple = column.filterMultiple,\n      filteredValue = column.filteredValue,\n      filterMethod = column.filterMethod;\n    if (filterable) {\n      if (filterMultiple && Array.isArray(filteredValue) && filteredValue.length) {\n        return preData.filter(function (_data) {\n          return filteredValue.some(function (value) {\n            return filterMethod(value, _data);\n          });\n        });\n      } else if (filteredValue) {\n        return preData.filter(function (_data) {\n          return filterMethod(filteredValue, _data);\n        });\n      }\n    }\n    return preData;\n  }, data);\n}\nvar TableStore = function (_Component) {\n  (0, _inherits3.default)(TableStore, _Component);\n  (0, _createClass3.default)(TableStore, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        tableStore: this\n      };\n    }\n  }]);\n  function TableStore(props) {\n    (0, _classCallCheck3.default)(this, TableStore);\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TableStore.__proto__ || Object.getPrototypeOf(TableStore)).call(this, props));\n    _this.state = {\n      fixedColumns: null,\n      // left fixed columns in _columns\n      rightFixedColumns: null,\n      // right fixed columns in _columns\n      columnRows: null,\n      // columns to render header\n      columns: null,\n      // contain only leaf column\n      isComplex: null,\n      // whether some column is fixed\n      expandingRows: [],\n      hoverRow: null,\n      currentRow: null,\n      selectable: null,\n      selectedRows: null,\n      sortOrder: null,\n      sortColumn: null\n    };\n    ['toggleRowSelection', 'toggleAllSelection', 'clearSelection', 'setCurrentRow'].forEach(function (fn) {\n      _this[fn] = _this[fn].bind(_this);\n    });\n    _this._isMounted = false;\n    return _this;\n  }\n  (0, _createClass3.default)(TableStore, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      this.updateColumns((0, _utils.getColumns)(this.props));\n      this.updateData(this.props);\n      this._isMounted = true;\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var data = this.props.data;\n      var nextColumns = (0, _utils.getColumns)(nextProps);\n      if ((0, _utils.getColumns)(this.props) !== nextColumns) {\n        this.updateColumns(nextColumns);\n      }\n      if (data !== nextProps.data) {\n        this.updateData(nextProps);\n      }\n    }\n  }, {\n    key: 'updateColumns',\n    // shouldComponentUpdate(nextProps) {\n    //   const propsKeys = Object.keys(this.props);\n    //   const nextPropsKeys = Object.keys(nextProps);\n    //\n    //   if (propsKeys.length !== nextPropsKeys.length) {\n    //     return true;\n    //   }\n    //   for (const key of propsKeys) {\n    //     if (this.props[key] !== nextProps[key]) {\n    //       return true;\n    //     }\n    //   }\n    //   return false;\n    // }\n\n    value: function updateColumns(columns) {\n      var _columns = (0, _normalizeColumns2.default)(columns, tableIDSeed++);\n      var fixedColumns = _columns.filter(function (column) {\n        return column.fixed === true || column.fixed === 'left';\n      });\n      var rightFixedColumns = _columns.filter(function (column) {\n        return column.fixed === 'right';\n      });\n      var selectable = void 0;\n      if (_columns[0] && _columns[0].type === 'selection') {\n        selectable = _columns[0].selectable;\n        if (fixedColumns.length && !_columns[0].fixed) {\n          _columns[0].fixed = true;\n          fixedColumns.unshift(_columns[0]);\n        }\n      }\n      _columns = [].concat(fixedColumns, _columns.filter(function (column) {\n        return !column.fixed;\n      }), rightFixedColumns);\n      this.setState(Object.assign(this.state || {}, {\n        fixedColumns: fixedColumns,\n        rightFixedColumns: rightFixedColumns,\n        columnRows: (0, _utils.convertToRows)(_columns),\n        columns: (0, _utils.getLeafColumns)(_columns),\n        isComplex: fixedColumns.length > 0 || rightFixedColumns.length > 0,\n        selectable: selectable\n      }));\n    }\n  }, {\n    key: 'updateData',\n    value: function updateData(props) {\n      var _props$data = props.data,\n        data = _props$data === undefined ? [] : _props$data,\n        defaultExpandAll = props.defaultExpandAll,\n        defaultSort = props.defaultSort;\n      var columns = this.state.columns;\n      var filteredData = filterData(data.slice(), columns);\n      var _state = this.state,\n        hoverRow = _state.hoverRow,\n        currentRow = _state.currentRow,\n        selectedRows = _state.selectedRows,\n        expandingRows = _state.expandingRows;\n      hoverRow = hoverRow && data.includes(hoverRow) ? hoverRow : null;\n      currentRow = currentRow && data.includes(currentRow) ? currentRow : null;\n      var _columns2 = (0, _slicedToArray3.default)(columns, 1),\n        _columns2$ = _columns2[0],\n        firstColumn = _columns2$ === undefined ? {} : _columns2$;\n      if (this._isMounted && data !== this.props.data && !firstColumn.reserveSelection) {\n        selectedRows = [];\n      } else {\n        selectedRows = selectedRows && selectedRows.filter(function (row) {\n          return data.includes(row);\n        }) || [];\n      }\n      if (!this._isMounted) {\n        expandingRows = defaultExpandAll ? data.slice() : [];\n      } else {\n        expandingRows = expandingRows.filter(function (row) {\n          return data.includes(row);\n        });\n      }\n      this.setState(Object.assign(this.state, {\n        data: filteredData,\n        filteredData: filteredData,\n        hoverRow: hoverRow,\n        currentRow: currentRow,\n        expandingRows: expandingRows,\n        selectedRows: selectedRows\n      }));\n      if ((!this._isMounted || data !== this.props.data) && defaultSort) {\n        var prop = defaultSort.prop,\n          _defaultSort$order = defaultSort.order,\n          order = _defaultSort$order === undefined ? 'ascending' : _defaultSort$order;\n        var sortColumn = columns.find(function (column) {\n          return column.property === prop;\n        });\n        this.changeSortCondition(sortColumn, order, false);\n      } else {\n        this.changeSortCondition(null, null, false);\n      }\n    }\n  }, {\n    key: 'setHoverRow',\n    value: function setHoverRow(index) {\n      if (!this.state.isComplex) return;\n      this.setState({\n        hoverRow: index\n      });\n    }\n  }, {\n    key: 'toggleRowExpanded',\n    value: function toggleRowExpanded(row, rowKey) {\n      var _this2 = this;\n      var expandRowKeys = this.props.expandRowKeys;\n      var expandingRows = this.state.expandingRows;\n      if (expandRowKeys) {\n        var isRowExpanding = expandRowKeys.includes(rowKey);\n        this.dispatchEvent('onExpand', row, !isRowExpanding);\n        return;\n      }\n      expandingRows = expandingRows.slice();\n      var rowIndex = expandingRows.indexOf(row);\n      if (rowIndex > -1) {\n        expandingRows.splice(rowIndex, 1);\n      } else {\n        expandingRows.push(row);\n      }\n      this.setState({\n        expandingRows: expandingRows\n      }, function () {\n        _this2.dispatchEvent('onExpand', row, rowIndex === -1);\n      });\n    }\n  }, {\n    key: 'isRowExpanding',\n    value: function isRowExpanding(row, rowKey) {\n      var expandRowKeys = this.props.expandRowKeys;\n      var expandingRows = this.state.expandingRows;\n      if (expandRowKeys) {\n        return expandRowKeys.includes(rowKey);\n      }\n      return expandingRows.includes(row);\n    }\n  }, {\n    key: 'setCurrentRow',\n    value: function setCurrentRow(row) {\n      var _this3 = this;\n      var _props = this.props,\n        currentRowKey = _props.currentRowKey,\n        rowKey = _props.rowKey;\n      if (currentRowKey && !Array.isArray(currentRowKey)) {\n        this.dispatchEvent('onCurrentChange', (0, _utils.getRowIdentity)(row, rowKey), currentRowKey);\n        return;\n      }\n      var oldRow = this.state.currentRow;\n      this.setState({\n        currentRow: row\n      }, function () {\n        _this3.dispatchEvent('onCurrentChange', row, oldRow);\n      });\n    }\n  }, {\n    key: 'toggleRowSelection',\n    value: function toggleRowSelection(row, isSelected) {\n      var _this4 = this;\n      var _props2 = this.props,\n        currentRowKey = _props2.currentRowKey,\n        rowKey = _props2.rowKey;\n      if (Array.isArray(currentRowKey)) {\n        var toggledRowKey = (0, _utils.getRowIdentity)(row, rowKey);\n        var rowIndex = currentRowKey.indexOf(toggledRowKey);\n        var newCurrentRowKey = currentRowKey.slice();\n        if (isSelected !== undefined) {\n          if (isSelected && rowIndex === -1) {\n            newCurrentRowKey.push(toggledRowKey);\n          } else if (!isSelected && rowIndex !== -1) {\n            newCurrentRowKey.splice(rowIndex, 1);\n          }\n        } else {\n          rowIndex === -1 ? newCurrentRowKey.push(toggledRowKey) : newCurrentRowKey.splice(rowIndex, 1);\n        }\n        this.dispatchEvent('onSelect', newCurrentRowKey, row);\n        this.dispatchEvent('onSelectChange', newCurrentRowKey);\n        return;\n      }\n      this.setState(function (state) {\n        var selectedRows = state.selectedRows.slice();\n        var rowIndex = selectedRows.indexOf(row);\n        if (isSelected !== undefined) {\n          if (isSelected) {\n            rowIndex === -1 && selectedRows.push(row);\n          } else {\n            rowIndex !== -1 && selectedRows.splice(rowIndex, 1);\n          }\n        } else {\n          rowIndex === -1 ? selectedRows.push(row) : selectedRows.splice(rowIndex, 1);\n        }\n        return {\n          selectedRows: selectedRows\n        };\n      }, function () {\n        _this4.dispatchEvent('onSelect', _this4.state.selectedRows, row);\n        _this4.dispatchEvent('onSelectChange', _this4.state.selectedRows);\n      });\n    }\n  }, {\n    key: 'toggleAllSelection',\n    value: function toggleAllSelection() {\n      var _this5 = this;\n      var _props3 = this.props,\n        currentRowKey = _props3.currentRowKey,\n        rowKey = _props3.rowKey;\n      var _state2 = this.state,\n        data = _state2.data,\n        selectedRows = _state2.selectedRows,\n        selectable = _state2.selectable;\n      var allSelectableRows = selectable ? data.filter(function (data, index) {\n        return selectable(data, index);\n      }) : data.slice();\n      if (Array.isArray(currentRowKey)) {\n        var newCurrentRowKey = this.isAllSelected ? [] : allSelectableRows.map(function (row) {\n          return (0, _utils.getRowIdentity)(row, rowKey);\n        });\n        this.dispatchEvent('onSelectAll', newCurrentRowKey);\n        this.dispatchEvent('onSelectChange', newCurrentRowKey);\n        return;\n      }\n      if (this.isAllSelected) {\n        selectedRows = [];\n      } else {\n        selectedRows = allSelectableRows;\n      }\n      this.setState({\n        selectedRows: selectedRows\n      }, function () {\n        _this5.dispatchEvent('onSelectAll', selectedRows);\n        _this5.dispatchEvent('onSelectChange', selectedRows);\n      });\n    }\n  }, {\n    key: 'clearSelection',\n    value: function clearSelection() {\n      var currentRowKey = this.props.currentRowKey;\n      if (Array.isArray(currentRowKey)) return;\n      this.setState({\n        selectedRows: []\n      });\n    }\n  }, {\n    key: 'isRowSelected',\n    value: function isRowSelected(row, rowKey) {\n      var currentRowKey = this.props.currentRowKey;\n      var selectedRows = this.state.selectedRows;\n      if (Array.isArray(currentRowKey)) {\n        return currentRowKey.includes(rowKey);\n      }\n      return selectedRows.includes(row);\n    }\n  }, {\n    key: 'changeSortCondition',\n    value: function changeSortCondition(column, order) {\n      var _this6 = this;\n      var shouldDispatchEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      if (!column) {\n        ;\n        var _state3 = this.state;\n        column = _state3.sortColumn;\n        order = _state3.sortOrder;\n      }\n      var data = this.state.filteredData.slice();\n      if (!column) {\n        this.setState({\n          data: data\n        });\n        return;\n      }\n      var _column = column,\n        sortMethod = _column.sortMethod,\n        property = _column.property,\n        sortable = _column.sortable;\n      var sortedData = void 0;\n      if (!order || sortable === 'custom') {\n        sortedData = data;\n      } else if (sortable && sortable !== 'custom') {\n        var flag = order === 'ascending' ? 1 : -1;\n        if (sortMethod) {\n          sortedData = data.sort(function (a, b) {\n            return sortMethod(a, b) ? flag : -flag;\n          });\n        } else {\n          sortedData = data.sort(function (a, b) {\n            var aVal = (0, _utils.getValueByPath)(a, property);\n            var bVal = (0, _utils.getValueByPath)(b, property);\n            return aVal === bVal ? 0 : aVal > bVal ? flag : -flag;\n          });\n        }\n      }\n      var sortSet = function sortSet() {\n        shouldDispatchEvent && _this6.dispatchEvent('onSortChange', column && order ? {\n          column: column,\n          prop: column.property,\n          order: order\n        } : {\n          column: null,\n          prop: null,\n          order: null\n        });\n      };\n      if (sortable && sortable !== 'custom') {\n        this.setState({\n          sortColumn: column,\n          sortOrder: order,\n          data: sortedData\n        }, sortSet());\n      } else if (sortable && sortable === 'custom') {\n        this.setState({\n          sortColumn: column,\n          sortOrder: order\n        }, sortSet());\n      }\n    }\n  }, {\n    key: 'toggleFilterOpened',\n    value: function toggleFilterOpened(column) {\n      column.filterOpened = !column.filterOpened;\n      this.forceUpdate();\n    }\n  }, {\n    key: 'changeFilteredValue',\n    value: function changeFilteredValue(column, value) {\n      var _this7 = this;\n      column.filteredValue = value;\n      var filteredData = filterData(this.props.data.slice(), this.state.columns);\n      this.setState(Object.assign(this.state, {\n        filteredData: filteredData\n      }), function () {\n        _this7.dispatchEvent('onFilterChange', (0, _defineProperty3.default)({}, column.columnKey, value));\n      });\n      this.changeSortCondition(null, null, false);\n    }\n  }, {\n    key: 'dispatchEvent',\n    value: function dispatchEvent(name) {\n      var fn = this.props[name];\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      fn && fn.apply(undefined, args);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var renderExpanded = (this.state.columns.find(function (column) {\n        return column.type === 'expand';\n      }) || {}).expandPannel;\n      return React.createElement(_TableLayout2.default, (0, _extends3.default)({}, this.props, {\n        renderExpanded: renderExpanded,\n        tableStoreState: this.state\n      }));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }, {\n    key: 'isAllSelected',\n    get: function get() {\n      var _props4 = this.props,\n        currentRowKey = _props4.currentRowKey,\n        rowKey = _props4.rowKey;\n      var _state4 = this.state,\n        selectedRows = _state4.selectedRows,\n        data = _state4.data,\n        selectable = _state4.selectable;\n      var selectableData = selectable ? data.filter(function (row, index) {\n        return selectable(row, index);\n      }) : data;\n      if (!selectableData.length) {\n        return false;\n      }\n      if (Array.isArray(currentRowKey)) {\n        return selectableData.every(function (data) {\n          return currentRowKey.includes((0, _utils.getRowIdentity)(data, rowKey));\n        });\n      }\n      return selectedRows && selectedRows.length === selectableData.length;\n    }\n  }]);\n  return TableStore;\n}(_libs.Component);\nTableStore.propTypes = {\n  style: _libs.PropTypes.object,\n  columns: _libs.PropTypes.arrayOf(_libs.PropTypes.object),\n  data: _libs.PropTypes.arrayOf(_libs.PropTypes.object),\n  height: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number]),\n  maxHeight: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number]),\n  stripe: _libs.PropTypes.bool,\n  border: _libs.PropTypes.bool,\n  fit: _libs.PropTypes.bool,\n  showHeader: _libs.PropTypes.bool,\n  highlightCurrentRow: _libs.PropTypes.bool,\n  currentRowKey: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number, _libs.PropTypes.arrayOf(_libs.PropTypes.string)]),\n  rowClassName: _libs.PropTypes.func,\n  rowStyle: _libs.PropTypes.func,\n  rowKey: _libs.PropTypes.oneOfType([_libs.PropTypes.func, _libs.PropTypes.string]),\n  emptyText: _libs.PropTypes.string,\n  defaultExpandAll: _libs.PropTypes.bool,\n  expandRowKeys: _libs.PropTypes.arrayOf(_libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number])),\n  defaultSort: _libs.PropTypes.shape({\n    prop: _libs.PropTypes.string,\n    order: _libs.PropTypes.oneOf(['ascending', 'descending'])\n  }),\n  tooltipEffect: _libs.PropTypes.oneOf(['dark', 'light']),\n  showSummary: _libs.PropTypes.bool,\n  sumText: _libs.PropTypes.string,\n  summaryMethod: _libs.PropTypes.func,\n  onSelect: _libs.PropTypes.func,\n  onSelectAll: _libs.PropTypes.func,\n  onSelectChange: _libs.PropTypes.func\n};\nTableStore.defaultProps = {\n  data: [],\n  showHeader: true,\n  stripe: false,\n  fit: true,\n  emptyText: _locale2.default.t('el.table.emptyText'),\n  defaultExpandAll: false,\n  highlightCurrentRow: false,\n  showSummary: false,\n  sumText: _locale2.default.t('el.table.sumText')\n};\nTableStore.childContextTypes = {\n  tableStore: _libs.PropTypes.any\n};\nvar _default = TableStore;\nexports.default = _default;\n;\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n  if (!reactHotLoader) {\n    return;\n  }\n  reactHotLoader.register(tableIDSeed, 'tableIDSeed', 'src/table/TableStore.jsx');\n  reactHotLoader.register(filterData, 'filterData', 'src/table/TableStore.jsx');\n  reactHotLoader.register(TableStore, 'TableStore', 'src/table/TableStore.jsx');\n  reactHotLoader.register(_default, 'default', 'src/table/TableStore.jsx');\n})();\n;\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_defineProperty2","_defineProperty3","_slicedToArray2","_slicedToArray3","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_react","React","_interopRequireWildcard","_libs","_locale","_locale2","_TableLayout","_TableLayout2","_normalizeColumns","_normalizeColumns2","_utils","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","default","enterModule","reactHotLoaderGlobal","module","tableIDSeed","filterData","data","columns","reduce","preData","column","filterable","filterMultiple","filteredValue","filterMethod","Array","isArray","length","filter","_data","some","TableStore","_Component","getChildContext","tableStore","props","_this","__proto__","getPrototypeOf","state","fixedColumns","rightFixedColumns","columnRows","isComplex","expandingRows","hoverRow","currentRow","selectable","selectedRows","sortOrder","sortColumn","forEach","fn","bind","_isMounted","componentWillMount","updateColumns","getColumns","updateData","componentWillReceiveProps","nextProps","nextColumns","_columns","fixed","type","unshift","concat","setState","assign","convertToRows","getLeafColumns","_props$data","undefined","defaultExpandAll","defaultSort","filteredData","slice","_state","includes","_columns2","_columns2$","firstColumn","reserveSelection","row","prop","_defaultSort$order","order","find","property","changeSortCondition","setHoverRow","index","toggleRowExpanded","rowKey","_this2","expandRowKeys","isRowExpanding","dispatchEvent","rowIndex","indexOf","splice","push","setCurrentRow","_this3","_props","currentRowKey","getRowIdentity","oldRow","toggleRowSelection","isSelected","_this4","_props2","toggledRowKey","newCurrentRowKey","toggleAllSelection","_this5","_props3","_state2","allSelectableRows","isAllSelected","map","clearSelection","isRowSelected","_this6","shouldDispatchEvent","arguments","_state3","_column","sortMethod","sortable","sortedData","flag","sort","a","b","aVal","getValueByPath","bVal","sortSet","toggleFilterOpened","filterOpened","forceUpdate","changeFilteredValue","_this7","columnKey","name","_len","args","_key","apply","render","renderExpanded","expandPannel","createElement","tableStoreState","__reactstandin__regenerateByEval","code","eval","get","_props4","_state4","selectableData","every","Component","propTypes","style","PropTypes","object","arrayOf","height","oneOfType","string","number","maxHeight","stripe","bool","border","fit","showHeader","highlightCurrentRow","rowClassName","func","rowStyle","emptyText","shape","oneOf","tooltipEffect","showSummary","sumText","summaryMethod","onSelect","onSelectAll","onSelectChange","defaultProps","t","childContextTypes","any","_default","reactHotLoader","register","leaveModule"],"sources":["/Users/mickey/document/Work/ToilBuster/agile-project/node_modules/element-react/dist/npm/es5/src/table/TableStore.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _libs = require('../../libs');\n\nvar _locale = require('../locale');\n\nvar _locale2 = _interopRequireDefault(_locale);\n\nvar _TableLayout = require('./TableLayout');\n\nvar _TableLayout2 = _interopRequireDefault(_TableLayout);\n\nvar _normalizeColumns = require('./normalizeColumns');\n\nvar _normalizeColumns2 = _interopRequireDefault(_normalizeColumns);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar tableIDSeed = 1;\n\nfunction filterData(data, columns) {\n  return columns.reduce(function (preData, column) {\n    var filterable = column.filterable,\n        filterMultiple = column.filterMultiple,\n        filteredValue = column.filteredValue,\n        filterMethod = column.filterMethod;\n\n    if (filterable) {\n      if (filterMultiple && Array.isArray(filteredValue) && filteredValue.length) {\n        return preData.filter(function (_data) {\n          return filteredValue.some(function (value) {\n            return filterMethod(value, _data);\n          });\n        });\n      } else if (filteredValue) {\n        return preData.filter(function (_data) {\n          return filterMethod(filteredValue, _data);\n        });\n      }\n    }\n    return preData;\n  }, data);\n}\n\nvar TableStore = function (_Component) {\n  (0, _inherits3.default)(TableStore, _Component);\n  (0, _createClass3.default)(TableStore, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        tableStore: this\n      };\n    }\n  }]);\n\n  function TableStore(props) {\n    (0, _classCallCheck3.default)(this, TableStore);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TableStore.__proto__ || Object.getPrototypeOf(TableStore)).call(this, props));\n\n    _this.state = {\n      fixedColumns: null, // left fixed columns in _columns\n      rightFixedColumns: null, // right fixed columns in _columns\n      columnRows: null, // columns to render header\n      columns: null, // contain only leaf column\n      isComplex: null, // whether some column is fixed\n      expandingRows: [],\n      hoverRow: null,\n      currentRow: null,\n      selectable: null,\n      selectedRows: null,\n      sortOrder: null,\n      sortColumn: null\n    };\n\n    ['toggleRowSelection', 'toggleAllSelection', 'clearSelection', 'setCurrentRow'].forEach(function (fn) {\n      _this[fn] = _this[fn].bind(_this);\n    });\n\n    _this._isMounted = false;\n    return _this;\n  }\n\n  (0, _createClass3.default)(TableStore, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      this.updateColumns((0, _utils.getColumns)(this.props));\n      this.updateData(this.props);\n      this._isMounted = true;\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var data = this.props.data;\n\n      var nextColumns = (0, _utils.getColumns)(nextProps);\n\n      if ((0, _utils.getColumns)(this.props) !== nextColumns) {\n        this.updateColumns(nextColumns);\n      }\n      if (data !== nextProps.data) {\n        this.updateData(nextProps);\n      }\n    }\n  }, {\n    key: 'updateColumns',\n\n\n    // shouldComponentUpdate(nextProps) {\n    //   const propsKeys = Object.keys(this.props);\n    //   const nextPropsKeys = Object.keys(nextProps);\n    //\n    //   if (propsKeys.length !== nextPropsKeys.length) {\n    //     return true;\n    //   }\n    //   for (const key of propsKeys) {\n    //     if (this.props[key] !== nextProps[key]) {\n    //       return true;\n    //     }\n    //   }\n    //   return false;\n    // }\n\n    value: function updateColumns(columns) {\n      var _columns = (0, _normalizeColumns2.default)(columns, tableIDSeed++);\n\n      var fixedColumns = _columns.filter(function (column) {\n        return column.fixed === true || column.fixed === 'left';\n      });\n      var rightFixedColumns = _columns.filter(function (column) {\n        return column.fixed === 'right';\n      });\n\n      var selectable = void 0;\n      if (_columns[0] && _columns[0].type === 'selection') {\n        selectable = _columns[0].selectable;\n        if (fixedColumns.length && !_columns[0].fixed) {\n          _columns[0].fixed = true;\n          fixedColumns.unshift(_columns[0]);\n        }\n      }\n\n      _columns = [].concat(fixedColumns, _columns.filter(function (column) {\n        return !column.fixed;\n      }), rightFixedColumns);\n\n      this.setState(Object.assign(this.state || {}, {\n        fixedColumns: fixedColumns,\n        rightFixedColumns: rightFixedColumns,\n        columnRows: (0, _utils.convertToRows)(_columns),\n        columns: (0, _utils.getLeafColumns)(_columns),\n        isComplex: fixedColumns.length > 0 || rightFixedColumns.length > 0,\n        selectable: selectable\n      }));\n    }\n  }, {\n    key: 'updateData',\n    value: function updateData(props) {\n      var _props$data = props.data,\n          data = _props$data === undefined ? [] : _props$data,\n          defaultExpandAll = props.defaultExpandAll,\n          defaultSort = props.defaultSort;\n      var columns = this.state.columns;\n\n      var filteredData = filterData(data.slice(), columns);\n\n      var _state = this.state,\n          hoverRow = _state.hoverRow,\n          currentRow = _state.currentRow,\n          selectedRows = _state.selectedRows,\n          expandingRows = _state.expandingRows;\n\n      hoverRow = hoverRow && data.includes(hoverRow) ? hoverRow : null;\n      currentRow = currentRow && data.includes(currentRow) ? currentRow : null;\n\n      var _columns2 = (0, _slicedToArray3.default)(columns, 1),\n          _columns2$ = _columns2[0],\n          firstColumn = _columns2$ === undefined ? {} : _columns2$;\n\n      if (this._isMounted && data !== this.props.data && !firstColumn.reserveSelection) {\n        selectedRows = [];\n      } else {\n        selectedRows = selectedRows && selectedRows.filter(function (row) {\n          return data.includes(row);\n        }) || [];\n      }\n\n      if (!this._isMounted) {\n        expandingRows = defaultExpandAll ? data.slice() : [];\n      } else {\n        expandingRows = expandingRows.filter(function (row) {\n          return data.includes(row);\n        });\n      }\n\n      this.setState(Object.assign(this.state, {\n        data: filteredData,\n        filteredData: filteredData,\n        hoverRow: hoverRow,\n        currentRow: currentRow,\n        expandingRows: expandingRows,\n        selectedRows: selectedRows\n      }));\n      if ((!this._isMounted || data !== this.props.data) && defaultSort) {\n        var prop = defaultSort.prop,\n            _defaultSort$order = defaultSort.order,\n            order = _defaultSort$order === undefined ? 'ascending' : _defaultSort$order;\n\n        var sortColumn = columns.find(function (column) {\n          return column.property === prop;\n        });\n        this.changeSortCondition(sortColumn, order, false);\n      } else {\n        this.changeSortCondition(null, null, false);\n      }\n    }\n  }, {\n    key: 'setHoverRow',\n    value: function setHoverRow(index) {\n      if (!this.state.isComplex) return;\n      this.setState({\n        hoverRow: index\n      });\n    }\n  }, {\n    key: 'toggleRowExpanded',\n    value: function toggleRowExpanded(row, rowKey) {\n      var _this2 = this;\n\n      var expandRowKeys = this.props.expandRowKeys;\n      var expandingRows = this.state.expandingRows;\n\n      if (expandRowKeys) {\n        var isRowExpanding = expandRowKeys.includes(rowKey);\n        this.dispatchEvent('onExpand', row, !isRowExpanding);\n        return;\n      }\n\n      expandingRows = expandingRows.slice();\n      var rowIndex = expandingRows.indexOf(row);\n      if (rowIndex > -1) {\n        expandingRows.splice(rowIndex, 1);\n      } else {\n        expandingRows.push(row);\n      }\n\n      this.setState({\n        expandingRows: expandingRows\n      }, function () {\n        _this2.dispatchEvent('onExpand', row, rowIndex === -1);\n      });\n    }\n  }, {\n    key: 'isRowExpanding',\n    value: function isRowExpanding(row, rowKey) {\n      var expandRowKeys = this.props.expandRowKeys;\n      var expandingRows = this.state.expandingRows;\n\n\n      if (expandRowKeys) {\n        return expandRowKeys.includes(rowKey);\n      }\n      return expandingRows.includes(row);\n    }\n  }, {\n    key: 'setCurrentRow',\n    value: function setCurrentRow(row) {\n      var _this3 = this;\n\n      var _props = this.props,\n          currentRowKey = _props.currentRowKey,\n          rowKey = _props.rowKey;\n\n      if (currentRowKey && !Array.isArray(currentRowKey)) {\n        this.dispatchEvent('onCurrentChange', (0, _utils.getRowIdentity)(row, rowKey), currentRowKey);\n        return;\n      }\n\n      var oldRow = this.state.currentRow;\n\n      this.setState({\n        currentRow: row\n      }, function () {\n        _this3.dispatchEvent('onCurrentChange', row, oldRow);\n      });\n    }\n  }, {\n    key: 'toggleRowSelection',\n    value: function toggleRowSelection(row, isSelected) {\n      var _this4 = this;\n\n      var _props2 = this.props,\n          currentRowKey = _props2.currentRowKey,\n          rowKey = _props2.rowKey;\n\n\n      if (Array.isArray(currentRowKey)) {\n        var toggledRowKey = (0, _utils.getRowIdentity)(row, rowKey);\n        var rowIndex = currentRowKey.indexOf(toggledRowKey);\n        var newCurrentRowKey = currentRowKey.slice();\n\n        if (isSelected !== undefined) {\n          if (isSelected && rowIndex === -1) {\n            newCurrentRowKey.push(toggledRowKey);\n          } else if (!isSelected && rowIndex !== -1) {\n            newCurrentRowKey.splice(rowIndex, 1);\n          }\n        } else {\n          rowIndex === -1 ? newCurrentRowKey.push(toggledRowKey) : newCurrentRowKey.splice(rowIndex, 1);\n        }\n\n        this.dispatchEvent('onSelect', newCurrentRowKey, row);\n        this.dispatchEvent('onSelectChange', newCurrentRowKey);\n        return;\n      }\n\n      this.setState(function (state) {\n        var selectedRows = state.selectedRows.slice();\n        var rowIndex = selectedRows.indexOf(row);\n\n        if (isSelected !== undefined) {\n          if (isSelected) {\n            rowIndex === -1 && selectedRows.push(row);\n          } else {\n            rowIndex !== -1 && selectedRows.splice(rowIndex, 1);\n          }\n        } else {\n          rowIndex === -1 ? selectedRows.push(row) : selectedRows.splice(rowIndex, 1);\n        }\n\n        return { selectedRows: selectedRows };\n      }, function () {\n        _this4.dispatchEvent('onSelect', _this4.state.selectedRows, row);\n        _this4.dispatchEvent('onSelectChange', _this4.state.selectedRows);\n      });\n    }\n  }, {\n    key: 'toggleAllSelection',\n    value: function toggleAllSelection() {\n      var _this5 = this;\n\n      var _props3 = this.props,\n          currentRowKey = _props3.currentRowKey,\n          rowKey = _props3.rowKey;\n      var _state2 = this.state,\n          data = _state2.data,\n          selectedRows = _state2.selectedRows,\n          selectable = _state2.selectable;\n\n\n      var allSelectableRows = selectable ? data.filter(function (data, index) {\n        return selectable(data, index);\n      }) : data.slice();\n\n      if (Array.isArray(currentRowKey)) {\n        var newCurrentRowKey = this.isAllSelected ? [] : allSelectableRows.map(function (row) {\n          return (0, _utils.getRowIdentity)(row, rowKey);\n        });\n        this.dispatchEvent('onSelectAll', newCurrentRowKey);\n        this.dispatchEvent('onSelectChange', newCurrentRowKey);\n        return;\n      }\n\n      if (this.isAllSelected) {\n        selectedRows = [];\n      } else {\n        selectedRows = allSelectableRows;\n      }\n\n      this.setState({\n        selectedRows: selectedRows\n      }, function () {\n        _this5.dispatchEvent('onSelectAll', selectedRows);\n        _this5.dispatchEvent('onSelectChange', selectedRows);\n      });\n    }\n  }, {\n    key: 'clearSelection',\n    value: function clearSelection() {\n      var currentRowKey = this.props.currentRowKey;\n\n      if (Array.isArray(currentRowKey)) return;\n\n      this.setState({\n        selectedRows: []\n      });\n    }\n  }, {\n    key: 'isRowSelected',\n    value: function isRowSelected(row, rowKey) {\n      var currentRowKey = this.props.currentRowKey;\n      var selectedRows = this.state.selectedRows;\n\n\n      if (Array.isArray(currentRowKey)) {\n        return currentRowKey.includes(rowKey);\n      }\n      return selectedRows.includes(row);\n    }\n  }, {\n    key: 'changeSortCondition',\n    value: function changeSortCondition(column, order) {\n      var _this6 = this;\n\n      var shouldDispatchEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      if (!column) {\n        ;\n\n        var _state3 = this.state;\n        column = _state3.sortColumn;\n        order = _state3.sortOrder;\n      }var data = this.state.filteredData.slice();\n      if (!column) {\n        this.setState({\n          data: data\n        });\n        return;\n      }\n\n      var _column = column,\n          sortMethod = _column.sortMethod,\n          property = _column.property,\n          sortable = _column.sortable;\n\n      var sortedData = void 0;\n      if (!order || sortable === 'custom') {\n        sortedData = data;\n      } else if (sortable && sortable !== 'custom') {\n        var flag = order === 'ascending' ? 1 : -1;\n        if (sortMethod) {\n          sortedData = data.sort(function (a, b) {\n            return sortMethod(a, b) ? flag : -flag;\n          });\n        } else {\n          sortedData = data.sort(function (a, b) {\n            var aVal = (0, _utils.getValueByPath)(a, property);\n            var bVal = (0, _utils.getValueByPath)(b, property);\n            return aVal === bVal ? 0 : aVal > bVal ? flag : -flag;\n          });\n        }\n      }\n      var sortSet = function sortSet() {\n        shouldDispatchEvent && _this6.dispatchEvent('onSortChange', column && order ? { column: column, prop: column.property, order: order } : { column: null, prop: null, order: null });\n      };\n      if (sortable && sortable !== 'custom') {\n        this.setState({\n          sortColumn: column,\n          sortOrder: order,\n          data: sortedData\n        }, sortSet());\n      } else if (sortable && sortable === 'custom') {\n        this.setState({\n          sortColumn: column,\n          sortOrder: order\n        }, sortSet());\n      }\n    }\n  }, {\n    key: 'toggleFilterOpened',\n    value: function toggleFilterOpened(column) {\n      column.filterOpened = !column.filterOpened;\n      this.forceUpdate();\n    }\n  }, {\n    key: 'changeFilteredValue',\n    value: function changeFilteredValue(column, value) {\n      var _this7 = this;\n\n      column.filteredValue = value;\n      var filteredData = filterData(this.props.data.slice(), this.state.columns);\n      this.setState(Object.assign(this.state, {\n        filteredData: filteredData\n      }), function () {\n        _this7.dispatchEvent('onFilterChange', (0, _defineProperty3.default)({}, column.columnKey, value));\n      });\n      this.changeSortCondition(null, null, false);\n    }\n  }, {\n    key: 'dispatchEvent',\n    value: function dispatchEvent(name) {\n      var fn = this.props[name];\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      fn && fn.apply(undefined, args);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var renderExpanded = (this.state.columns.find(function (column) {\n        return column.type === 'expand';\n      }) || {}).expandPannel;\n      return React.createElement(_TableLayout2.default, (0, _extends3.default)({}, this.props, {\n        renderExpanded: renderExpanded,\n        tableStoreState: this.state\n      }));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }, {\n    key: 'isAllSelected',\n    get: function get() {\n      var _props4 = this.props,\n          currentRowKey = _props4.currentRowKey,\n          rowKey = _props4.rowKey;\n      var _state4 = this.state,\n          selectedRows = _state4.selectedRows,\n          data = _state4.data,\n          selectable = _state4.selectable;\n\n      var selectableData = selectable ? data.filter(function (row, index) {\n        return selectable(row, index);\n      }) : data;\n\n      if (!selectableData.length) {\n        return false;\n      }\n\n      if (Array.isArray(currentRowKey)) {\n        return selectableData.every(function (data) {\n          return currentRowKey.includes((0, _utils.getRowIdentity)(data, rowKey));\n        });\n      }\n\n      return selectedRows && selectedRows.length === selectableData.length;\n    }\n  }]);\n  return TableStore;\n}(_libs.Component);\n\nTableStore.propTypes = {\n  style: _libs.PropTypes.object,\n  columns: _libs.PropTypes.arrayOf(_libs.PropTypes.object),\n  data: _libs.PropTypes.arrayOf(_libs.PropTypes.object),\n  height: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number]),\n  maxHeight: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number]),\n  stripe: _libs.PropTypes.bool,\n  border: _libs.PropTypes.bool,\n  fit: _libs.PropTypes.bool,\n  showHeader: _libs.PropTypes.bool,\n  highlightCurrentRow: _libs.PropTypes.bool,\n  currentRowKey: _libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number, _libs.PropTypes.arrayOf(_libs.PropTypes.string)]),\n  rowClassName: _libs.PropTypes.func,\n  rowStyle: _libs.PropTypes.func,\n  rowKey: _libs.PropTypes.oneOfType([_libs.PropTypes.func, _libs.PropTypes.string]),\n  emptyText: _libs.PropTypes.string,\n  defaultExpandAll: _libs.PropTypes.bool,\n  expandRowKeys: _libs.PropTypes.arrayOf(_libs.PropTypes.oneOfType([_libs.PropTypes.string, _libs.PropTypes.number])),\n  defaultSort: _libs.PropTypes.shape({ prop: _libs.PropTypes.string, order: _libs.PropTypes.oneOf(['ascending', 'descending']) }),\n  tooltipEffect: _libs.PropTypes.oneOf(['dark', 'light']),\n  showSummary: _libs.PropTypes.bool,\n  sumText: _libs.PropTypes.string,\n  summaryMethod: _libs.PropTypes.func,\n  onSelect: _libs.PropTypes.func,\n  onSelectAll: _libs.PropTypes.func,\n  onSelectChange: _libs.PropTypes.func\n};\nTableStore.defaultProps = {\n  data: [],\n  showHeader: true,\n  stripe: false,\n  fit: true,\n  emptyText: _locale2.default.t('el.table.emptyText'),\n  defaultExpandAll: false,\n  highlightCurrentRow: false,\n  showSummary: false,\n  sumText: _locale2.default.t('el.table.sumText')\n};\nTableStore.childContextTypes = {\n  tableStore: _libs.PropTypes.any\n};\nvar _default = TableStore;\nexports.default = _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(tableIDSeed, 'tableIDSeed', 'src/table/TableStore.jsx');\n  reactHotLoader.register(filterData, 'filterData', 'src/table/TableStore.jsx');\n  reactHotLoader.register(TableStore, 'TableStore', 'src/table/TableStore.jsx');\n  reactHotLoader.register(_default, 'default', 'src/table/TableStore.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}